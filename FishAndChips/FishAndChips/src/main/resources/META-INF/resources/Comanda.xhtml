<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <style>
        .outputTextWithBorder {
            border: 1px solid rgb(128, 128, 128); /* Adiciona uma borda de 1px preta */
            padding: 5px; /* Adiciona um espaçamento interno de 5px */
            display: inline-block; /* Permite definir largura e altura */
            border-radius: 5px;
        }
        body, h2, h3, h4, h6, .product-item-content {
            font-family: Arial, sans-serif;
        }

        .card {
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .menu-item-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
        }

        .cardapio, .itens {
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            margin-top: 10px;
            flex: 1;
        }

        .cardapio {
            margin-right: 10px;
        }

        .product-item .product-item-content {
            border: 1px solid var(--surface-d);
            border-radius: 5px;
            margin: .5rem;
            text-align: center;
            padding: 1rem 0;
            background-color: white;
            height: 280px;
            font-family: Arial, sans-serif;
        }

        .product-item .product-image {
            width: 50%;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
        }

        .rounded-button {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            margin: 0 5px;
            font-size: 16px;
        }

        .ui-button-flat {
            background-color: #e0e0e0;
            border: none;
            color: #333;
        }

        h2, h3 {
            margin-bottom: 20px;
        }

        .btn-container {
            text-align: center;
            margin-top: 20px;

        }

        .btn-container h\\:commandButton {
            margin: 0 10px;
        }

        .input-container, .select-container {
            display: flex;
            flex-direction: column;
            margin-right: 20px;
        }

        .input-container label, .select-container label {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .input-container input, .select-container select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .filter-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

    </style>
</h:head>

<h:body>
    <div class="card">
        <h:form>
            <p:megaMenu orientation="horizontal" autoDisplay="false">
                <f:facet name="start">
                    <p:graphicImage name="img/41d41629fa61f6a532018f0cde7a2017.jpg"/>
                </f:facet>
                <p:submenu label="Menu" icon="pi pi-bars">
                    <p:column>
                        <p:submenu label="Menu">
                            <p:menuitem value="Inicio" url="home.xhtml"/>
                            <p:menuitem value="Mesas" url="index.xhtml"/>
                            <p:menuitem value="Relatório"/>
                        </p:submenu>
                    </p:column>
                </p:submenu>
            </p:megaMenu>
        </h:form>
    </div>

    <h:form id="form">
        <h2>Comanda da Mesa <h:outputText value="#{param.mesa}"/></h2>
        <div class="filter-container">
            <div class="select-container">
                <label for="group">Filtrar produtos:</label>
                <p:selectOneMenu id="group" value="#{DeskController.category}">
                    <f:selectItem itemLabel="Seleciona a categoria do produto: " itemValue=""/>
                    <f:selectItems value="#{DeskController.categories}"/>
                </p:selectOneMenu>
            </div>
            <div class="input-container">
                <label  for="numPessoas">Número de Pessoas:</label>
                <h:inputText id="numPessoas" value="#{SaleController.desk.occupantNumber}" />
            </div>
        </div>

        <div class="card">
            <p:carousel value="#{SaleController.activeSaleItemList}" var="product" numVisible="3" numScroll="3"
                        responsiveOptions="#{SaleController.responsiveOptions}">
                <f:facet name="header">
                </f:facet>
                <div class="product-item">
                    <div class="product-item-content">
                        <div class="mb-3">
                            <p:graphicImage value="#{product.product.image}" styleClass="product-image"
                            />
                        </div>
                        <div>
                            <h4 class="mb-1">#{product.product.name}</h4>
                            <h6 class="mt-0 mb-3">
                                <h:outputText value="#{product.price}" style="font-size: 24px;">
                                    <f:convertNumber type="currency" pattern="¤#0" currencySymbol="R$" minFractionDigits="2" maxFractionDigits="2"/>
                                </h:outputText>
                            </h6>
                            <div class="mt-5">
                                <p:commandButton type="submit" icon="pi pi-minus" styleClass="rounded-button ui-button-flat" actionListener="#{product.decreaseQuantityToProduct}" update="output" />
                                <h:outputText id="output" value="#{product.quantity}"/>
                                <p:commandButton type="submit" icon="pi pi-plus" styleClass="rounded-button ui-button-flat" actionListener="#{product.addQuantityToProduct}" update="output" />
                            </div>
                            <div>
                                <p:commandButton type="submit" value="Adicionar" styleClass="ui-button-success" actionListener="#{SaleController.addProduct(product.product.id)}"/>
                            </div>
                        </div>
                    </div>
                </div>
            </p:carousel>
        </div>
    </h:form>
    <h:form>
        <h3>Itens da Comanda</h3>

        <div class="card">
            <h:form>
                <p:dataScroller value="#{SaleController.saleItemList}" var="product" chunkSize="10">
                    <f:facet name="header">
                    </f:facet>

                    <div class="product">
                        <div class="product-list-item p-5">
                            <p:graphicImage value="#{product.product.image}"/>
                            <div class="product-list-detail">
                                <div class="product-name">#{product.product.name}</div>
                                <div>
                                    <h:outputText value="Quantidade: "/>
                                    <h:outputText value= "#{product.quantity}"/>
                                </div>
                                <i class="pi pi-tag product-category-icon"/><span
                                    class="product-category">#{product.product.category.name}</span>
                            </div>
                            <div class="product-list-action">
                                <h:outputText value="#{product.price}" styleClass="product-price">
                                    <f:convertNumber currencySymbol="$" type="currency"/>
                                </h:outputText>
                                <p:commandButton value="Excluir produto" icon="pi pi-trash" styleClass="ui-button-danger">
                                </p:commandButton>
                            </div>
                        </div>
                    </div>
                </p:dataScroller>
            </h:form>
        </div>

        <div class="btn-container">
            <h:commandButton type="button"  value="Voltar" action="index.xhtml?faces-redirect=true" />
            <h:commandButton type="button" value="Finalizar Comanda" action="#{SaleController.endCommand}" styleClass="ui-button-danger"/>
        </div>
    </h:form>
</h:body>
</html>
